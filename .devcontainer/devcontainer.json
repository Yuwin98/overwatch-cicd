{
  "$schema": "https://raw.githubusercontent.com/devcontainers/spec/main/schemas/devContainer.schema.json",
  "name": "Overwatch CICD Dev",
  "features": {
    "ghcr.io/devcontainers/features/python:1": { "version": "3.11" },
    "ghcr.io/devcontainers/features/node:1": { "version": "20" },
    "ghcr.io/devcontainers/features/postgres:1": {
      "version": "16",
      "postgresql database": "overwatch",
      "postgresql user": "postgres",
      "postgresql password": "postgres"
    }
  },
  "forwardPorts": [8000, 5173, 5432],
  "portsAttributes": {
    "8000": { "label": "API", "onAutoForward": "openBrowser", "visibility": "public" },
    "5173": { "label": "Web", "onAutoForward": "openBrowser", "visibility": "public" }
  },
  "remoteEnv": {
    "DATABASE_URL": "postgresql+psycopg://postgres:postgres@localhost:5432/overwatch",
    "DATA_DIR": "/workspaces/${localWorkspaceFolderBasename}/backend/data",
    "CORS_ORIGINS": "https://*.github.dev,http://localhost:5173"
  },
  "postCreateCommand": "bash .devcontainer/post-create.sh",
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-python.python",
        "ms-azuretools.vscode-docker"
      ]
    }
  }
}